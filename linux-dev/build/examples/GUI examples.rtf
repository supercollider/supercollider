{\rtf1\mac\ansicpg10000\cocoartf102
{\fonttbl\f0\fnil\fcharset77 Monaco;}
{\colortbl;\red255\green255\blue255;\red191\green0\blue0;\red0\green0\blue191;\red96\green96\blue96;
\red0\green115\blue0;}
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\ql\qnatural

\f0\fs18 \cf0 \
\cf2 // GUI examples\
\cf0 \
\cf2 ////////////////////////////////////////////////////////////////////////\
\cf0 \
(\
\cf2 // create a window. set properties from a routine.\
\cf3 var\cf0  w, r;\
w = \cf3 SCWindow\cf0 (\cf4 "trem"\cf0 , \cf3 Rect\cf0 (512, 256, 360, 130));\
w.front;\
r = \cf3 Routine\cf0 (\{\
	60.do(\{ \cf3 arg\cf0  i;\
		0.05.wait;\
		w.bounds = w.bounds.moveBy(10.rand2, 10.rand2);\
		w.alpha = cos(i*0.1pi)*0.5+0.5;\
	\});\
	1.wait;\
	w.close;\
\});\
\cf3 AppClock\cf0 .play(r);\
)\
\
\cf2 ////////////////////////////////////////////////////////////////////////\
\cf0 \
(\
\cf2 // create an array of buttons.\
\cf3 var\cf0  w;\
\
w = \cf3 SCWindow\cf0 (\cf4 "button panel"\cf0 , \cf3 Rect\cf0 (128, 64, 340, 360));\
w.view.decorator = \cf3 FlowLayout\cf0 (w.view.bounds);\
32.do(\{ \cf3 arg\cf0  i;\
b = \cf3 SCButton\cf0 (w, \cf3 Rect\cf0 (0,0, 75, 24));\
b.states = [[\cf4 "Start "\cf0 ++i, \cf3 Color\cf0 .black, \cf3 Color\cf0 .rand],[\cf4 "Stop "\cf0 ++i, \cf3 Color\cf0 .white, \cf3 Color\cf0 .red]];\
\
\});\
\cf2 //w.view.background = Color(0.6,0.8,0.8);\
\cf0 w.front;\
)\
\
\cf2 ////////////////////////////////////////////////////////////////////////\
\cf0 \
(\
\cf2 // create a GUI window with some NumberBoxes.\
// You can command click on a control to drag its value to another control\
\cf3 var\cf0  w, n, f, s;\
w = \cf3 SCWindow\cf0 (\cf4 "number box test"\cf0 , \cf3 Rect\cf0 (128, 64, 260, 80));\
w.view.decorator = f = \cf3 FlowLayout\cf0 (w.view.bounds);\
\
n = \cf3 SCNumberBox\cf0 (w, \cf3 Rect\cf0 (0,0,80,24));\
n.value = 123;\
\
n = \cf3 SCNumberBox\cf0 (w, \cf3 Rect\cf0 (0,0,80,24));\
n.value = 456;\
\
n = \cf3 SCDragBoth\cf0 (w, \cf3 Rect\cf0 (0,0,80,24));\
n.object = 789;\
\
f.nextLine;\
\
s = \cf3 SCSlider\cf0 (w, \cf3 Rect\cf0 (0,0,240,24));\
\
w.front;\
)\
\
\cf2 ////////////////////////////////////////////////////////////////////////\
\cf0 \
(\
\cf2 // create a GUI for a mixer.\
\cf3 var\cf0  w;\
\
w = \cf3 SCWindow\cf0 (\cf4 "mixer"\cf0 , \cf3 Rect\cf0 (128, 64, 340, 360));\
w.view.decorator = f = \cf3 FlowLayout\cf0 (w.view.bounds,\cf3 Point\cf0 (4,4),\cf3 Point\cf0 (4,2));\
17.do(\{ \cf3 arg\cf0  i;\
	\cf3 var\cf0  v, s, n, spec, p, height = 16;\
	\
	v = \cf3 SCStaticText\cf0 (w, \cf3 Rect\cf0 (0, 0, 56, height+2));\
	if (i == 0, \{\
		v.font = \cf3 Font\cf0 (\cf4 "Helvetica-Bold"\cf0 , 13);\
		v.stringColor = \cf3 Color\cf0 .yellow;\
	\},\{\
		v.font = \cf3 Font\cf0 (\cf4 "Helvetica"\cf0 , 12);\
		v.stringColor = \cf3 Color\cf0 .white;\
	\});\
	v.align = \cf5 \\right\cf0 ;\
	s = \cf3 SCSlider\cf0 (w, \cf3 Rect\cf0 (0, 0, 182, height));\
	s.resize = 2;\
	spec = \cf5 \\db\cf0 .asSpec;\
	s.action = \{ \
		\cf3 var\cf0  db;\
		db = spec.map(s.value).round(0.1);\
		\cf2 //v.string = if (db < -100, \{ "-inf" \},\{ db.asString ++ " dB" \});\
\cf0 		v.string = db.asString ++ \cf4 " dB"\cf0  ;\
	\};\
	s.action.value;\
\
	n = \cf3 SCStaticText\cf0 (w, \cf3 Rect\cf0 (0, 0, 72, height+2));\
	if (i == 0, \{\
		n.string = \cf4 "Master"\cf0 ;\
		n.stringColor = \cf3 Color\cf0 .yellow;\
		n.font = \cf3 Font\cf0 (\cf4 "Helvetica-Bold"\cf0 , 13);\
	\},\{\
		n.string = \cf4 "Channel "\cf0  ++ i;\
		n.stringColor = \cf3 Color\cf0 .white;\
		n.font = \cf3 Font\cf0 (\cf4 "Helvetica"\cf0 , 12);\
	\});\
	n.background = \cf3 Color\cf0 .rand(0.1,0.5);\
	n.resize = 3;\
	\
	f.nextLine;\
\});\
w.view.background = \cf3 HiliteGradient\cf0 (\cf3 Color\cf0 .blue, \cf3 Color\cf0 .green, \cf5 \\h\cf0 , 128, 0.3);\
w.front;\
w.refresh;\
)\
\
\cf2 ////////////////////////////////////////////////////////////////////////\
\cf0 \
(\
\cf2 // jumble of controls\
\cf0 \
w = \cf3 SCWindow\cf0 .new;\
\
a = \cf3 SCSlider\cf0 (w, \cf3 Rect\cf0 (20,20,114,16));\
\
b = \cf3 SCButton\cf0 (w, \cf3 Rect\cf0 (20, 50, 80, 24));\
\
b.states = [[\cf4 "Start Sound"\cf0 , \cf3 Color\cf0 .red, \cf3 Color\cf0 .grey(0.9)],[\cf4 "Stop Sound"\cf0 , \cf3 Color\cf0 .white, \cf3 Color\cf0 .grey(0.4)]];\
\
c = \cf3 SCDragSource\cf0 (w, \cf3 Rect\cf0 (120, 50, 80, 24));\
c.string = \cf4 "DragSource"\cf0 ;\
c.font = \cf3 Font\cf0 (\cf4 "Helvetica"\cf0 , 12);\
c.beginDragAction = \{ \cf3 arg\cf0  view; [view.object,view.object]; \};\
\cf2 //c.stringColor = Color(0.5, 0.2, 0.7);\
\cf0 \
\
d = \cf3 SCDragSink\cf0 (w, \cf3 Rect\cf0 (120, 85, 80, 24));\
d.string = \cf4 "DragSink"\cf0 ;\
\
z = \cf3 SCCompositeView\cf0 (w, \cf3 Rect\cf0 (0,100,800,300));\
\
s = \cf3 SCSlider\cf0 (z, \cf3 Rect\cf0 (20,120,180,24));\
\
\cf2 //s.backColor = Color(0,1,0);\
//s.knobColor = Color(1,0,0);\
\cf0 s.step = 1/10;\
\
r = \cf3 SCRangeSlider\cf0 (z, \cf3 Rect\cf0 (20,170,180,24));\
r.step = 1/20;\
\
q = \cf3 SCRangeSlider\cf0 (z, \cf3 Rect\cf0 (220, 170, 24, 180));\
\
t = \cf3 SC2DSlider\cf0 (w, \cf3 Rect\cf0 (220,20, 80, 80));\
t.action = \{ \cf3 arg\cf0  slider; c.object = slider.y.postln.round(0.001); \};\
\
p = \cf3 SCSlider\cf0 (z, \cf3 Rect\cf0 (248, 170, 24, 180));\
p.action = \{ arg slider; slider.value.postln; \};\
\
w.front;\
w.refresh;\
)\
\
\cf2 // properties you can set in the window above.\
\cf0 w.view.background = \cf3 HiliteGradient\cf0 (\cf3 Color\cf0 .blue, \cf3 Color\cf0 .red, \cf5 \\v\cf0 , 128, 0.2);\
r.background = \cf3 Color\cf0 .gray;\
\
z.visible = \cf3 false\cf0 ;\
z.visible = \cf3 true\cf0 ;\
\
z.enabled = \cf3 false\cf0 ;\
z.enabled = \cf3 true\cf0 ;\
	\
b.visible = \cf3 false\cf0 ;\
b.visible = \cf3 true\cf0 ;\
\
b.enabled = \cf3 false\cf0 ;\
b.enabled = \cf3 true\cf0 ;\
\
c.visible = \cf3 false\cf0 ;\
c.visible = \cf3 true\cf0 ;\
\
b.enabled = \cf3 false\cf0 ;\
b.visible = \cf3 false\cf0 ;\
b.visible = \cf3 true\cf0 ;\
b.enabled = \cf3 true\cf0 ;\
\
t.enabled = \cf3 false\cf0 ;\
t.enabled = \cf3 true\cf0 ;\
t.visible = \cf3 false\cf0 ;\
t.visible = \cf3 true\cf0 ;\
\
r.step = 0;\
\
t.canFocus = \cf3 false\cf0 ;\
t.canFocus = \cf3 true\cf0 ;\
t.prSetProperty(\cf5 \\canFocus\cf0 , \cf3 false\cf0 );\
\
c.object = \cf3 Point\cf0 (3,4);\
\
c.object = [1, 2, 3, 4];\
c.object = 123.456;\
c.object = \cf3 WhiteNoise\cf0 .ar(1);\
c.object = \cf3 WhiteNoise\cf0 ;\
c.object = \cf3 true\cf0 ;\
\
t.resize = 2;\
t.resize = 5;\
t.resize = 7;\
\
w.alpha = 0.7;\
w.close;\
\
\cf2 ////////////////////////////////////////////////////////////////////////\
\cf0 \
\cf2 // create a window to start and stop a synth\
\cf0 \
(\
\cf3 SynthDef\cf0 (\cf4 "moto-rev"\cf0 , \{\
	\cf3 var\cf0  x;\
	x = \cf3 RLPF\cf0 .ar(\cf3 LFPulse\cf0 .ar(\cf3 SinOsc\cf0 .kr(0.2, 0, 10, 21), [0,0.1], 0.1), 100, 0.1).clip2(0.4);\
	\cf3 Out\cf0 .ar(0, x);\
\}).writeDefFile;\
)\
\
(\
	\cf3 var\cf0  w, b1, b2, b3, name, a, s;\
	name = \cf4 "moto-rev"\cf0 ;\
	s = \cf3 Server\cf0 .local;\
	w = \cf3 SCWindow\cf0 (name.asString, \cf3 Rect\cf0 (128, 64, 260, 80));\
	w.view.decorator = \cf3 FlowLayout\cf0 (w.view.bounds);\
	\
	b1 = \cf3 SCButton\cf0 (w, \cf3 Rect\cf0 (0,0, 80, 24));\
	b1.states = [[\cf4 "Load"\cf0 , \cf3 Color\cf0 .black, \cf3 Color\cf0 .green]];\
	b1.action = \{ \cf3 arg\cf0  view; \
		s.sendMsg(\cf4 "/d_load"\cf0 , \cf4 "synthdefs/"\cf0 ++name++\cf4 ".scsyndef"\cf0 );\
	\};\
	b1.enabled = s.serverRunning;\
	\
	b2 = \cf3 SCButton\cf0 (w, \cf3 Rect\cf0 (0,0, 80, 24));\
	b2.states = [\
		[\cf4 "Play"\cf0 , \cf3 Color\cf0 .black, \cf3 Color\cf0 .green],\
		[\cf4 "Stop"\cf0 , \cf3 Color\cf0 .white, \cf3 Color\cf0 .red],\
	];\
	b2.action = \{ \cf3 arg\cf0  view; \
		if (b2.value == 1, \{\
			s.sendMsg(\cf4 "/s_new"\cf0 , name, 1001, 1, 0);\
		\},\{\
			s.sendMsg(\cf4 "/n_free"\cf0 , 1001);\
		\});\
	\};\
	b2.enabled = s.serverRunning;\
\
	a = \cf3 SimpleController\cf0 (s);\
	f = \{ \cf3 arg\cf0  server; \
		b1.enabled = server.serverRunning;\
		b2.enabled = server.serverRunning;\
	\};\
	a.put(\cf5 \\serverRunning\cf0 , f);\
	w.onClose = \{ \
		a.remove;\
		s.sendMsg(\cf4 "/n_free"\cf0 , 1001);		\
	\};\
	w.front;\
)\
\
\cf2 ////////////////////////////////////////////////////////////////////////\
\cf0 \
\cf2 // GUI to control a synth\
\cf0 \
(\
\cf3 SynthDef\cf0 (\cf4 "trem"\cf0 , \{ \cf3 arg\cf0  freq=800, rate=8, amp=0.1; \
	\cf3 var\cf0  osc;\
	freq = \cf3 Lag\cf0 .kr(freq, 0.3);\
	osc = \cf3 LFTri\cf0 .ar(freq, 0, \cf3 SinOsc\cf0 .kr( rate + [0,0.1],0,amp).max(0));\
	\cf3 Out\cf0 .ar(0, osc) \
\}).writeDefFile;\
\cf3 Server\cf0 .local.sendMsg(\cf4 "/d_load"\cf0 , \cf4 "synthdefs/trem.scsyndef"\cf0 );\
)\
\
(\
\cf3 var\cf0  w, f, d, values, server, id, isOn = \cf3 false\cf0 ;\
\cf3 var\cf0  b1, b2;\
\
values = \cf3 IdentityDictionary\cf0 .new;\
server = \cf3 Server\cf0 .local;\
\
f = \{ \cf3 arg\cf0  name, spec = \cf5 \\lin\cf0 , guispec;\
	\cf3 var\cf0  height = 20, v, s, n;\
	guispec = guispec ? spec;\
	spec = spec.asSpec;\
	guispec = guispec.asSpec;\
\
	v = \cf3 SCStaticText\cf0 (w, \cf3 Rect\cf0 (0, 0, 72, height));\
	v.font = \cf3 Font\cf0 (\cf4 "Helvetica"\cf0 , 12);\
	v.stringColor = \cf3 Color\cf0 .black;\
	v.align = \cf5 \\right\cf0 ;\
	\
	s = \cf3 SCSlider\cf0 (w, \cf3 Rect\cf0 (0, 0, 182, height));\
	s.resize = 2;\
	s.action = \{ \
		\cf3 var\cf0  val, guival, step;\
		val = spec.map(s.value);\
		values.put(name, val);\
		if (isOn, \{ server.sendMsg(\cf4 "/n_set"\cf0 , id, name, val); \});\
		guival = guispec.map(s.value);\
		step = pow(10, floor(min(0, guival.abs.log10 - 2)));\
		v.string = guival.round(step).asString ++ guispec.units;\
	\};\
	s.value = spec.unmap(spec.default);\
	s.action.value;\
	\
	n = \cf3 SCStaticText\cf0 (w, \cf3 Rect\cf0 (0, 0, 72, height));	n.string = name;\
	n.stringColor = \cf3 Color\cf0 .black;\
	n.font = \cf3 Font\cf0 (\cf4 "Helvetica"\cf0 , 12);\
	n.resize = 3;\
	\
	w.view.decorator.nextLine;\
\};\
\
id = 2001;\
w = \cf3 SCWindow\cf0 (\cf4 "trem"\cf0 , \cf3 Rect\cf0 (512, 64, 360, 130));\
w.view.decorator = d = \cf3 FlowLayout\cf0 (w.view.bounds);\
\
b1 = \cf3 SCButton\cf0 (w, \cf3 Rect\cf0 (0,0, 80, 24));\
b1.states = [[\cf4 "Load"\cf0 , \cf3 Color\cf0 .black, \cf3 Color\cf0 .green]];\
b1.action = \{ \cf3 arg\cf0  view; \
	server.sendMsg(\cf4 "/d_load"\cf0 , \cf4 "synthdefs/trem.scsyndef"\cf0 );\
\};\
b1.enabled = server.serverRunning;\
\
b2 = \cf3 SCButton\cf0 (w, \cf3 Rect\cf0 (0,0, 80, 24));\
b2.states = [\
	[\cf4 "Play"\cf0 , \cf3 Color\cf0 .black, \cf3 Color\cf0 .green],\
	[\cf4 "Stop"\cf0 , \cf3 Color\cf0 .white, \cf3 Color\cf0 .red],\
];\
b2.action = \{ \cf3 arg\cf0  view; \
	\cf3 var\cf0  msg;\
	if (view.value == 1, \{\
		isOn = \cf3 true\cf0 ;\
		msg = [\cf4 "/s_new"\cf0 , \cf4 "trem"\cf0 , 2001, 1, 0];\
		values.keysValuesDo(\{ \cf3 arg\cf0  key, value; \
			msg = msg.addAll([key, value]); \
		\});\
		server.performList(\cf5 \\sendMsg\cf0 , msg); \
	\},\{\
		isOn = \cf3 false\cf0 ;\
		server.sendMsg(\cf4 "/n_free"\cf0 , 2001); \
	\});\
\};\
b2.enabled = server.serverRunning;\
d.nextLine;\
\
f.value(\cf5 \\freq\cf0 , \cf5 \\freq\cf0 );\
f.value(\cf5 \\rate\cf0 , \cf5 \\lofreq\cf0 );\
f.value(\cf5 \\amp\cf0 , \cf5 \\amp\cf0 , \cf5 \\db\cf0 );\
\
a = \cf3 SimpleController\cf0 (server);\
f = \{ \cf3 arg\cf0  server; \
	b1.enabled = server.serverRunning;\
	b2.enabled = server.serverRunning;\
	if (server.serverRunning.not, \{ b2.value = 0 \});\
\};\
a.put(\cf5 \\serverRunning\cf0 , f);\
w.onClose = \{ \
	if (isOn, \{ server.sendMsg(\cf4 "/n_free"\cf0 , 2001) \});\
 	a.remove;\
\};\
\
w.front;\
)\
\
\cf2 ////////////////////////////////////////////////////////////////////////\
\cf0 \
\
(\
\cf2 // create a GUI window with some SCPopUpMenus.\
\cf3 var\cf0  w, n, f, s, a;\
w = \cf3 SCWindow\cf0 (\cf4 "popup menu test"\cf0 , \cf3 Rect\cf0 (128, 64, 260, 110));\
w.view.decorator = f = \cf3 FlowLayout\cf0 (w.view.bounds);\
a = [\cf4 "linear"\cf0 , \cf5 \\exponential\cf0 , \cf4 "very long item name"\cf0 , \cf5 \\sine\cf0 , \cf4 "welch"\cf0 , \cf4 "curve -2"\cf0 , \cf4 "db fader"\cf0 , \cf4 "squared"\cf0 , \cf4 "cubed"\cf0 ];\
\
n = \cf3 SCPopUpMenu\cf0 (w, \cf3 Rect\cf0 (0,0,80,18));\
n.items = a;\
\
n = \cf3 SCPopUpMenu\cf0 (w, \cf3 Rect\cf0 (0,0,80,18));\
n.items = a;\
\
n = \cf3 SCPopUpMenu\cf0 (w, \cf3 Rect\cf0 (0,0,80,18));\
n.items = a;\
\
f.nextLine;\
\
n = \cf3 SCPopUpMenu\cf0 (w, \cf3 Rect\cf0 (0,0,80,18));\
n.items = a;\
n.value = 5;\
\
n = \cf3 SCPopUpMenu\cf0 (w, \cf3 Rect\cf0 (0,0,80,18));\
n.items = a;\
n.background = \cf3 Color\cf0 .red;\
\
n = \cf3 SCPopUpMenu\cf0 (w, \cf3 Rect\cf0 (0,0,80,18));\
n.items = a;\
n.background = \cf3 Color\cf0 .blue;\
n.stringColor = \cf3 Color\cf0 .white;\
n.value = 3;\
n.action = \{ \cf3 arg\cf0  view; view.value.postln; \};\
\
f.nextLine;\
\
s = \cf3 SCSlider\cf0 (w, \cf3 Rect\cf0 (0,0,240,24));\
\
w.front;\
)\
}
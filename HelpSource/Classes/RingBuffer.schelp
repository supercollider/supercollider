CLASS:: RingBuffer
summary:: Fixed size ringbuffer
CATEGORIES:: Collections>Ordered
RELATED:: Classes/LinkedList

description::
A circular buffer that holds a fixed-size collection. Can be used as a queue.


CLASSMETHODS::

method::new
creates a new buffer.
argument::size
Initial size. The collection will be able to hold one minus this number of values.
argument::collectionClass
Defaults to the LINK::Classes/Array:: class.


INSTANCEMETHODS::

method::array
The collection.

method::readPos
Current read position.

method::writePos
Current write position.

method::maxSize
Maximum capacity.

method::size
Alias of LINK::#-readable::.

method::readable
Number of readble items.

method::writable
Number of writable items.

method::add
adds value and increase LINK::#-writePos::. Do nothing if no items can be written.

method::pop
returns next readable item and increase LINK::#-readPos::. Returns CODE::nil:: if no items can be read.

method::overwrite
adds value and increase LINK::#-writePos:: by overwriting oldest readable item.

method::do
iterates over the currently readable items.


examples::

CODE::

r = RingBuffer(4);
r.add(\one);
r.add(\two);
r.add(\three);
r.readable;
r.do{ |x| x.postln };


r = RingBuffer(12, Int16Array);
r.writable.do{ |i| r.add(i + 1 * 100) };
r.array;
r.readable;  // 11
r.writable;  // 0 = full
r.pop;
r.pop;
r.pop;
r.readable;  // 8
r.writable;  // 3


(
var num = 100;
var m = MultiSliderView().elasticMode_(1).size_(num).front;
var r = RingBuffer(num + 1, DoubleArray);
Routine({
	while { m.isClosed.not } {
		if(r.writable == 0, { r.pop });
		r.add(sin(thisThread.seconds).abs);
		r.do{ |v, i|
			m.index = i;
			m.currentvalue = v;
		};
		(1/60).wait;
	}
}).play(AppClock);
)
::

title:: SCDoc
summary:: help system main class
categories:: HelpSystem
related:: Reference/SCDocSyntax, Guides/WritingHelp, Classes/SCDocHTMLRenderer, Classes/SCDocNode, Classes/SCDocEntry


description::


SCDoc manages the SuperCollider documentation system.

It uses parses help files written in link::Reference/SCDocSyntax##SCDoc markup language:: and renders them as human-readable documents.

A guide to writing help can be found here: link::Guides/WritingHelp::.


classmethods::


subsection:: Document index


method::indexAllDocuments

indexes all documents and undocumented classes on the system, putting them in the code::SCDoc.documents:: dictionary. If run inside a Routine, this method will yield occasionally.

Run this method if you added a new document and want to see the changes without restarting SuperCollider.

argument::clearCache
if code::true::, force re-render of files even if the schelp source file is not newer than the destination.

discussion::
This will take a couple of seconds, and will be done automatically once before any help can be viewed. You might consider putting this in your startup.scd file to avoid getting this delay later when you decide to view a helpfile.


method::documents

the dictionary of indexed documents. They keys are the path relative to the Help folder and without extension, like teletype::Classes/SinOsc:: or teletype::Reference/SCDocSyntax::. The values are instances of link::Classes/SCDocEntry::


method::didIndexDocuments

a Boolean indicating if code::SCDoc.indexAllDocuments:: was called in this session yet.


method::helpSourceDir

gets/sets the system-wide directory of help sourcefiles. Defaults to code::Platform.classLibraryDir.dirname +/+ "HelpSource":: and should typically not be changed by the user.


method::helpSourceDirs

gets the list of HelpSource folders, including extensions and quarks (unless they are excluded from library compilation, e.g. by link::Classes/LanguageConfig#*excludeDefaultPaths::)

discussion::
This searches recursively for all folders named "HelpSource" under link::Classes/LanguageConfig#*includePaths::, as well as including the system-wide code::helpSourceDir::.
Unless link::Classes/LanguageConfig#*excludeDefaultPaths:: is on, code::Platform.userExtensionDir:: and code::Platform.systemExtensionDir:: are searched too.


method::findHelpFile

finds help for a given string. Tries to be smart.

returns::

the URL for help on given string


method::verbosity

verbosity level. 0 is silent.


subsection:: Parsing and Rendering


private:: checkVersion, exportDocMapJS, handleCopyMethods, postMsg, prParseFile, renderUndocClass


method::renderer

the default renderer, defaults to link::Classes/SCDocHTMLRenderer::


method::helpTargetDir

gets/sets the user help target directory. Defaults to code::Platform.userAppSupportDir +/+ "Help":: and should typically not be changed by the user.


method::parseFileFull

parses file.

argument::
full path to .schelp file

returns::

an link::Classes/SCDocNode:: tree


method::parseFileMetaData

parses only the stuff needed for metadata.

argument::
base HelpSource directory.

argument::
path relative above dir.

returns::

an link::Classes/SCDocNode:: tree


method::parseFilePartial

parses a file without header, for merging of document additions

argument::
full path to .ext.schelp file

returns::

an link::Classes/SCDocNode:: tree


method::parseDoc

parses the files associated with an link::Classes/SCDocEntry::, including any document additions (teletype::*.ext.schelp::)

argument::doc
the link::Classes/SCDocEntry:: to parse.

returns::

an link::Classes/SCDocNode:: tree


method::parseAndRender

parses and renders a specific document.

argument::doc
the link::Classes/SCDocEntry:: to parse and render.


method::renderAll

renders all help-files. Useful mainly if you want to render all help to put online or similar.

argument::includeExtensions
if code::false::, skip quarks, plugins and other extensions.


method::prepareHelpForURL

prepares help for the given URL by checking if the file needs rendering from schelp source, or some other action needs to be done.
Used as a wrapper to get on-the-fly rendering and processing of help files.

argument::url
the url to prepare. If this is not a local file inside link::#*helpTargetDir::, then it will just pass through the url directly.

returns::

the URL or code::nil:: if file not found.


subsection:: Utilities


method::getMethodDoc

extracts the link::Classes/SCDocNode:: tree for the specified method documentation.

argument::
name of class

argument::
name of method, prefixed with teletype::*:: for classmethods and teletype::-:: for instancemethods.

returns::

an link::Classes/SCDocNode:: tree


method::makeClassTemplate

creates a schelp template for specified class.

argument::doc
the link::Classes/SCDocEntry:: for the undocumented class.

returns::

the template string.


method::classHasArKrIr

argument::c
the link::Classes/Class:: to check.

returns::

code::true:: if the class responds to ar, kr or ir classmethods.


section:: Parser node tree output


The SCDoc parser outputs a tree of link::Classes/SCDocNode::s

The nodes reflects the tags in the input, but it's not a one-to-one correspondence.
A more detailed structure is added in the node tree, for easier rendering.

Example:

DOCUMENT
tree::
    ## HEADER
    tree::
        ## TITLE teletype::"SinOsc"::
        ## SUMMARY teletype::"Interpolating sine wavetable oscillator"::
        ## RELATED
        tree::
            ## STRING teletype::"Classes/FSinOsc"::
            ## STRING teletype::"Classes/SinOscFB"::
        ::
        ## CATEGORIES
        tree::
            ## STRING teletype::"UGens>Generators>Deterministic"::
            ## STRING teletype::"UGens>Oscillators"::
        ::
    ::
    ## BODY
    tree::
        ## DESCRIPTION
        tree::
            ## PROSE
            tree::
                ## TEXT teletype::"A paragraph with "::
                ## LINK teletype::"Classes/Osc##a link"::
                ## TEXT teletype::" to another document."::
            ::
            ## PROSE
            tree::
                ## TEXT teletype::"Another paragraph with "::
                ## STRONG teletype::"strong words"::
                ## TEXT teletype::" in it."::
            ::
        ::
        ## CLASSMETHODS
        tree::
            ## PROSE
            tree::
                ## TEXT teletype::"Some text..."::
            ::
            ## CMETHOD
            tree::
                ## METHODNAMES
                tree::
                    ## STRING teletype::"ar"::
                    ## STRING teletype::"kr"::
                ::
                ## METHODBODY
                tree::
                    ## PROSE
                    tree::
                        ## TEXT teletype::"Some text..."::
                    ::
                    ## ARGUMENTS
                    tree::
                        ## ARGUMENT teletype::"freq"::
                        tree::
                            ## PROSE
                            tree::
                                ## TEXT teletype::"Frequency in hertz"::
                            ::
                        ::
                        ## ARGUMENT teletype::"phase"::
                        tree::
                            ## PROSE
                            tree::
                                ## TEXT teletype::"Phase modulation"::
                            ::
                        ::
                    ::
                ::
            ::
        ::
        ## EXAMPLES
        tree::
            ## PROSE
            tree::
                ## TEXT teletype::"Here are some examples:"::
            ::
            ## CODEBLOCK
            teletype::
"{ SinOsc.ar(200, 0, 0.5) }.play;
// modulate freq
{ SinOsc.ar(XLine.kr(2000, 200), 0, 0.5) }.play;
// modulate freq
{ SinOsc.ar(SinOsc.ar(XLine.kr(1, 1000, 9), 0, 200, 800), 0, 0.25) }.play;
// modulate phase
{ SinOsc.ar(800, SinOsc.ar(XLine.kr(1, 1000, 9), 0, 2pi), 0.25) }.play;"
::

        ::
        ## SECTION teletype::"Another section"::
        tree::
            ## PROSE
            tree::
                ## TEXT teletype::"Some text..."::
            ::
        ::
    ::
::
